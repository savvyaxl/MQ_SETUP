crtmqm QMA
#crtmqm -u DEAD.LETTER.QUEUE QMA
strmqm QMA

runmqsc QMA
DEFINE QLOCAL (DEAD.LETTER.QUEUE) LIKE(SYSTEM.DEAD.LETTER.QUEUE) NOREPLACE
ALTER qmgr deadq(DEAD.LETTER.QUEUE)

DEFINE QLOCAL (QUEUE1)

DEFINE LISTENER (listener1) TRPTYPE(TCP) CONTROL(QMGR) PORT(1414)
START LISTENER (listener1)

https://www.ibm.com/docs/en/ibm-mq/9.2?topic=messages-enabling-cipherspecs

CREATE CHANNEL(QMA.SVRCONN) CHLTYPE(SVRCONN) SSLCAUTH(REQUIRED) SSLCIPH(ANY_TLS13) SSLPEER('CN=root,O=Queue,C=BR')  TRPTYPE(TCP)
CREATE CHANNEL(QMA.SVRCONN) CHLTYPE(CLNTCONN) SSLCIPH(ANY_TLS13) SSLPEER('SERIALNUMBER=04,CN=QMA,OU=SECURE SERVER,O=EU,L=MQQDEV,C=LX') CONNAME ('192.168.0.53(1414)') QMNAME(QMA)
REFRESH SECURITY TYPE(SSL)

ALTER CHANNEL(QMA.SVRCONN) CHLTYPE(SVRCONN) SSLCAUTH(REQUIRED) SSLCIPH(ANY_TLS13) SSLPEER('CN=root,O=Queue,C=BR')  TRPTYPE(TCP)
ALTER CHANNEL(QMA.SVRCONN) CHLTYPE(CLNTCONN) SSLCIPH(ANY_TLS13) SSLPEER('SERIALNUMBER=04,CN=QMA,OU=SECURE SERVER,O=EU,L=MQQDEV,C=LX') CONNAME ('192.168.0.53(1414)') QMNAME(QMA)
REFRESH SECURITY TYPE(SSL)

ALTER CHANNEL(QMA.SVRCONN) CHLTYPE(SVRCONN) SSLCAUTH(OPTIONAL) SSLCIPH('') SSLPEER('')  TRPTYPE(TCP)
ALTER CHANNEL(QMA.SVRCONN) CHLTYPE(CLNTCONN) SSLCIPH('') SSLPEER('') CONNAME ('192.168.0.53(1414)') QMNAME(QMA)
REFRESH SECURITY TYPE(SSL)


dspmqaut -m QMA -t queue -n QUEUE1 -p root
setmqaut -m QMA -t qmgr +connect -p root
setmqaut -m QMA -t qmgr +inq -p root
setmqaut -m QMA -t queue -n QUEUE1 +put -p root
setmqaut -m QMA -t queue -n QUEUE1 +get -p root

export MQSERVER='SYSTEM.DEF.SVRCONN/TCP/AMACHINE.ACOMPANY.COM(1414) '


scp '/var/mqm/qmgrs/QMA/@ipcc/AMQCLCHL.TAB' root@192.168.0.138:/tmp

export MQCHLLIB=/tmp
export MQCHLTAB=AMQCLCHL.TAB
export MQSSLKEYR=/tmp/ssl/root

/opt/mqm/samp/bin/amqsput QUEUE1 QMA
/opt/mqm/samp/bin/amqsget QUEUE1 QMA


ALTER QMGR SSLKEYR('/var/mqm/qmgrs/QMA/ssl/QMA')
